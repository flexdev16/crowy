{% load i18n %}{% if accounts %}<div class="facebook-add-account-box">	<a href="javascript:popup('facebook/oauth')" class="facebook-add-account">{% trans "Add Another Account" %}</a></div><p>	<label for="account_name">{% trans "Please select an account." %}</label>	<select name="account_name" id="facebook-name">		{% for account in accounts %}		<option value="{{account.account_name}}">{{account.display_name}}</option>		{% endfor %}	</select></p><p id="facebook-user-type">	<label>{% trans "Please select the type of timeline." %}</label>	<select name="type" id="facebook-type">		<option value="facebook-feed">{% trans "Feed" %}</option>		<option value="facebook-group">{% trans "Groups" %}</option>		<option value="facebook-page">{% trans "Your pages" %}</option>		<option value="facebook-like-page">{% trans "Your favorite pages" %}</option>		<option value="facebook-search">{% trans "Search" %}</option>		<!--		<option value="facebook-list">{% trans "Friend list" %}</option>		<option value="facebook-app">{% trans "Your applications" %}</option>		-->	</select></p><div id="facebook-select"><p id="facebook-feed">	<label for="type">{% trans "Please select the type of timeline." %}</label>	<select name="type">		<option value="me/home">News Feed</option>		<option value="me/feed">Wall</option>	</select></p><p id="facebook-list" style="display:none;">	<label for="list">{% trans "Select a friend list." %}</label>	<select name="list">	</select></p><p id="facebook-group" style="display:none;">	<label for="group">{% trans "Select a group." %}</label>	<select name="group">	</select></p><p id="facebook-search" style="display:none;">	<label for="search">{% trans "Enter a search term." %}</label>	<input name="search"></p><p id="facebook-page" style="display:none;">	<label for="page">{% trans "Select a page." %}</label>	<select name="page">	</select></p><p id="facebook-like-page" style="display:none;">	<label for="page">{% trans "Select a page." %}</label>	<select name="page">	</select></p><p id="facebook-app" style="display:none;">	<label for="app">{% trans "Select an app." %}</label>	<select name="app">	</select></p><p id="facebook-page-type" style="display:none";>	<label for="page-type">{% trans "Please select the type of timeline." %}</label>	<select name="page-type">		<option value="me/feed">Wall</option>	</select></p></div><div style="clear:all"></div><script type="text/javascript">var selectedType = "facebook-feed";$('#facebook-name').change(function(){	if($(this).val().indexOf('page_') == 0){		$('#facebook-user-type, #facebook-select').hide();		$('#facebook-page-type').show();		selectedType = 'facebook-page-type';	} else {		$('#facebook-user-type, #facebook-select').show();		$('#facebook-page-type').hide();	}});$("#facebook-type").change(function(){	selectedType = $(this).find('option:selected').val();	$("#facebook-select p").hide();	$("#"+selectedType).show();	if(selectedType == "facebook-page"){		$('#facebook-page-type').show();		var accountName = $("#facebook-name option:selected").val();		var listSelect = $("#facebook-page select")			.attr("disabled","disabled").empty()			.append($("<option/>").text("Loading..."));		$.get("facebook/api/"+accountName, {path: 'me/accounts'}, function(data){			listSelect.empty().removeAttr("disabled");			$.each(data.data, function(){				if(this.category == 'Application') return true;				$("<option/>").data('name',this.name).val("page/"+this.id).text(this.name + '/' + this.category)					.appendTo(listSelect);			});		});	} else if(selectedType == "facebook-app"){		var accountName = $("#facebook-name option:selected").val();		var listSelect = $("#facebook-app select")			.attr("disabled","disabled").empty()			.append($("<option/>").text("Loading..."));		$.get("facebook/api/"+accountName, {path: 'me/accounts'}, function(data){			listSelect.empty().removeAttr("disabled");			$.each(data.data, function(){				if(this.category != 'Application') return true;				$("<option/>").val("app/"+this.id).text(this.name + '/' + this.category).appendTo(listSelect);			});		});	} else if(selectedType == "facebook-list"){		var accountName = $("#facebook-name option:selected").val();		var listSelect = $("#facebook-list select")			.attr("disabled","disabled").empty()			.append($("<option/>").text("Loading..."));		$.get("facebook/api/"+accountName, {path: 'me/friendlists'}, function(data){			listSelect.empty().removeAttr("disabled");			$.each(data.data, function(){				$("<option/>").val("list/"+this.id).text(this.name).appendTo(listSelect);			});		});	} else if(selectedType == "facebook-group"){		var accountName = $("#facebook-name option:selected").val();		var listSelect = $("#facebook-group select")			.attr("disabled","disabled").empty()			.append($("<option/>").text("Loading..."));		$.get("facebook/api/"+accountName, {path: 'me/groups'}, function(data){			listSelect.empty().removeAttr("disabled");			$.each(data.data, function(){				$("<option/>").val("group/"+this.id).text(this.name).appendTo(listSelect);			});		});	} else if(selectedType == "facebook-like-page"){		$('#facebook-page-type').show();		var accountName = $("#facebook-name option:selected").val();		var listSelect = $("#facebook-like-page select")			.attr("disabled","disabled").empty()			.append($("<option/>").text("Loading..."));		$.get("facebook/api/"+accountName, {path: 'me/likes'}, function(data){			listSelect.empty().removeAttr("disabled");			$.each(data.data, function(){				if(this.category == 'Application') return true;				$("<option/>").data('name',this.name).val("page/"+this.id).text(this.name + '/' + this.category)					.appendTo(listSelect);			});		});	}});function getColumnInfo(){	var selectedAccount = $("#facebook-name option:selected"), name, type, typeName, pageAccount;	var accountName = selectedAccount.val(), displayName = selectedAccount.text();	if(selectedType == 'facebook-search') {		typeName = $("#facebook-search input").val();		type = "search/"+typeName;		name = typeName;	} else if(selectedType == 'facebook-page') {		pageAccount = $("#"+selectedType+" select option:selected").val().replace('/','_');		displayName = $("#"+selectedType+" select option:selected").data('name');		type = $('#facebook-page-type select option:selected').val();		name = $('#facebook-page-type select option:selected').text();	} else {		type = $("#"+selectedType+" select option:selected").val();		name = $("#"+selectedType+" select option:selected").text();	}	return {		"name": name,		"service": "facebook",		"original_account": accountName,		"account_name": pageAccount || accountName,		"account_label": displayName,		"type": type	}}</script>{% else %}<p>{% trans "There is no account of Facebook." %}</p><p><a href="javascript:popup('facebook/oauth')" id="facebook-link">{% trans "Add Account" %}</a></p><script type="text/javascript">$("#facebook-link").button();</script>{% endif %}